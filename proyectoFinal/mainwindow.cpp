#include "mainwindow.h"
#include <QVector>
#include "QGraphicsPixmapItem"
#include "jugador.h"
#include "ui_mainwindow.h"

MainWindow::MainWindow(QWidget *parent)
    : QMainWindow(parent)
    , ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    resize(700, 700);
    scene = new QGraphicsScene(this);
    view = new QGraphicsView(scene, this);
    view->setFixedSize(700, 700);
    view->setScene(scene);
    view->setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);
    view->setVerticalScrollBarPolicy(Qt::ScrollBarAlwaysOff);
    nivel1();
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::crearMurosLaberinto()
{
    QVector<QRectF> posicionesMuros
        = {{44, 0, 17, 280},    {44, 266, 126, 14},  {44, 86, 83, 14},    {98, 0, 17, 58},
           {150, 0, 17, 146},   {98, 132, 74, 14},   {98, 132, 17, 14},   {44, 179, 71, 14},
           {0, 312, 61, 14},    {98, 312, 73, 14},   {150, 312, 17, 43},  {98, 310, 17, 459},
           {151, 179, 17, 245}, {209, 45, 17, 193},  {151, 179, 270, 14}, {209, 86, 101, 14},
           {209, 45, 35, 14},   {333, 0, 17, 193},   {333, 45, 92, 14},   {391, 86, 17, 142},
           {448, 86, 17, 142},  {391, 128, 465, 14}, {209, 220, 17, 367}, {209, 220, 47, 14},
           {151, 353, 69, 14},  {151, 353, 17, 58},  {98, 397, 70, 14},   {0, 445, 115, 14},
           {488, 44, 197, 14},  {274, 445, 17, 57},  {209, 445, 82, 14},  {209, 397, 17, 62},
           {274, 310, 17, 101}, {274, 397, 59, 14},  {316, 397, 17, 189}, {291, 266, 174, 14},
           {312, 220, 153, 14}, {448, 220, 17, 60},  {391, 266, 17, 58},  {333, 310, 75, 14},
           {333, 310, 17, 41},  {465, 0, 17, 59},    {465, 45, 68, 14},   {482, 310, 75, 14},
           {493, 86, 17, 151},  {493, 86, 101, 14},  {493, 220, 185, 14}, {540, 266, 69, 14},
           {540, 220, 17, 63},  {333, 310, 17, 43},  {540, 128, 17, 44},  {540, 128, 117, 14},
           {649, 128, 17, 65},  {649, 179, 266, 14}, {898, 86, 17, 110},  {783, 0, 17, 103},
           {578, 45, 17, 58},   {578, 45, 222, 14},  {707, 45, 17, 100},  {707, 128, 148, 14},
           {783, 179, 17, 58},  {898, 45, 79, 14},   {898, 45, 17, 83},   {943, 179, 81, 14},
           {960, 310, 64, 14},  {960, 220, 17, 107}, {842, 220, 135, 14}, {898, 266, 17, 268},
           {810, 397, 212, 14}, {810, 397, 17, 108}, {763, 266, 166, 14}, {810, 266, 17, 61},
           {707, 310, 120, 14}, {707, 220, 17, 63},  {649, 266, 75, 14},  {649, 266, 17, 101},
           {649, 353, 75, 14},  {707, 353, 17, 106}, {707, 445, 75, 14},  {761, 397, 37, 14},
           {785, 353, 17, 58},  {785, 353, 47, 14},  {960, 488, 64, 14},  {960, 488, 17, 57},
           {759, 531, 201, 14}, {759, 488, 17, 57},  {707, 488, 60, 14},  {707, 488, 17, 98},
           {898, 572, 62, 14},  {960, 615, 64, 14},  {873, 615, 42, 14},  {873, 615, 17, 242},
           {873, 843, 47, 14},  {915, 843, 17, 44},  {810, 531, 17, 203}, {917, 663, 60, 14},
           {917, 663, 17, 61},  {917, 663, 60, 14},  {960, 710, 17, 45},  {960, 800, 64, 14},
           {759, 572, 17, 91},  {810, 755, 78, 14},  {960, 887, 64, 14},  {960, 868, 17, 82},
           {919, 936, 41, 14},  {707, 710, 117, 14}, {707, 615, 17, 109}, {669, 615, 55, 14},
           {669, 755, 17, 195}, {810, 936, 17, 88},  {810, 936, 66, 14},  {810, 800, 17, 104},
           {759, 800, 27, 14},  {759, 755, 17, 62},  {759, 887, 68, 14},  {759, 887, 17, 63},
           {729, 936, 45, 14},  {557, 755, 220, 14}, {674, 843, 62, 14},  {575, 936, 114, 14},
           {575, 663, 95, 14},  {608, 663, 17, 106}, {608, 800, 17, 57},  {557, 755, 17, 45},
           {540, 843, 76, 14},  {540, 843, 17, 58},  {493, 887, 64, 14},  {493, 887, 17, 137},
           {364, 663, 146, 14}, {274, 615, 90, 14},  {391, 663, 17, 61},  {391, 710, 59, 14},
           {493, 663, 17, 151}, {432, 800, 78, 14},  {432, 800, 17, 101}, {223, 936, 226, 14},
           {0, 936, 168, 14},   {98, 843, 17, 181},  {151, 887, 140, 14}, {391, 887, 17, 63},
           {333, 887, 75, 14},  {333, 843, 17, 58},  {232, 843, 118, 14}, {333, 755, 111, 14},
           {391, 755, 17, 88},  {274, 800, 134, 14}, {274, 755, 17, 59},  {98, 531, 161, 14},
           {44, 488, 17, 141},  {0, 615, 61, 14},    {64, 572, 104, 14},  {209, 579, 121, 14},
           {125, 572, 17, 73},  {209, 572, 17, 105}, {274, 572, 17, 57},  {161, 615, 65, 14},
           {151, 663, 75, 14},  {98, 615, 17, 109},  {44, 710, 71, 14},   {44, 710, 17, 59},
           {151, 663, 17, 106}, {98, 755, 193, 14},  {209, 710, 82, 14},  {274, 663, 17, 61},
           {274, 663, 47, 14},  {311, 663, 17, 61},  {311, 710, 45, 14},  {98, 800, 17, 101},
           {61, 887, 54, 14},   {0, 800, 223, 14},   {0, 843, 61, 14},    {56, 98, 30, 30},
           {44, 377, 30, 30},   {44, 662, 30, 30},   {221, 486, 30, 30},  {221, 946, 30, 30},
           {333, 98, 30, 30},   {256, 266, 30, 30},  {366, 804, 30, 30},  {416, 712, 30, 30},
           {574, 179, 30, 30},  {622, 86, 30, 30},   {622, 896, 30, 30},  {640, 718, 30, 30},
           {714, 226, 30, 30},  {714, 672, 30, 30},  {848, 252, 30, 30},  {854, 312, 30, 30},
           {850, 434, 30, 30},  {930, 58, 30, 30},   {960, 354, 30, 30},  {960, 870, 30, 30}};

    for (const QRectF &datosMuros : posicionesMuros) {
        QGraphicsRectItem *muro = new QGraphicsRectItem(datosMuros);
        muro->setScale(0.683);
        scene->addItem(muro);
    }
}

void MainWindow::nivel1()
{
    QPixmap imagenLaberinto(
        "C:/Users/steve/OneDrive/Escritorio/PROYECTO_FINAL/multimedia/laberinto.png");
    QPixmap imagenEscaladaLaberinto = imagenLaberinto.scaled(700, 700);
    QGraphicsPixmapItem *laberinto = new QGraphicsPixmapItem(imagenEscaladaLaberinto);
    laberinto->setZValue(-100);
    scene->addItem(laberinto);
    scene->setSceneRect(laberinto->boundingRect());
    crearMurosLaberinto();
    QPixmap spriteGoku("C:/Users/steve/OneDrive/Escritorio/PROYECTO_FINAL/multimedia/goku.png");
    Jugador *goku = new Jugador(spriteGoku);
    scene->addItem(goku);
    goku->setFocus();
    goku->setPos(187, 87);
}
